<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hashi Puzzle</title>
        <script>
            // Set base href dynamically for GitHub Pages and local development
            (function() {
                var path = window.location.pathname;
                var segments = path.split('/').filter(function(s) { return s.length > 0; });
                
                // If path looks like /repo-name/game/... or /repo-name/rules/...
                // then base should be /repo-name/
                // Otherwise (local or root deployment), base is /
                var base = '/';
                if (segments.length > 0 && segments[0] !== 'index.html') {
                    var firstSegment = segments[0];
                    // Check if first segment is a route (game, rules, 404) or a repo name
                    if (firstSegment !== 'game' && firstSegment !== 'rules' && firstSegment !== '404') {
                        base = '/' + firstSegment + '/';
                    }
                }
                document.write('<base href="' + base + '">');
            })();
        </script>
        <link rel="stylesheet" href="styles.css">
    </head>
    <script>
        // Set CSS variable for actual viewport height on mobile
        function setVH() {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        setVH();
        window.addEventListener('resize', setVH);
    </script>
    <script>
        (function(){
            var redirect = sessionStorage.redirect;
            delete sessionStorage.redirect;
            if (redirect && redirect != location.href) {
            history.replaceState(null, null, redirect);
            }
        })();
    </script>
    <link data-trunk rel="copy-file" href="404.html">
    <link data-trunk rel="copy-file" href="styles.css">
    <body></body>
</html>
